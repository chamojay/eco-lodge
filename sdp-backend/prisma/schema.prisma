generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model customers {
  CustomerID     Int              @id @default(autoincrement())
  Title          customers_Title?
  FirstName      String           @db.VarChar(50)
  LastName       String           @db.VarChar(50)
  Email          String           @db.VarChar(100)
  Phone          String           @db.VarChar(20)
  Country        String           @db.VarChar(50)
  CreatedAt      DateTime?        @default(now()) @db.Timestamp(0)
  NIC            String?          @db.VarChar(12)
  PassportNumber String?          @db.VarChar(15)
  reservations   reservations[]
}

model extra_charge_types {
  TypeID        Int             @id @default(autoincrement())
  Name          String          @db.VarChar(100)
  DefaultAmount Decimal         @db.Decimal(10, 2)
  extra_charges extra_charges[]
}

model extra_charges {
  ChargeID           Int                 @id @default(autoincrement())
  ReservationID      Int
  TypeID             Int?
  Description        String?             @db.VarChar(255)
  Amount             Decimal             @db.Decimal(10, 2)
  CreatedAt          DateTime?           @default(now()) @db.DateTime(0)
  reservations       reservations        @relation(fields: [ReservationID], references: [ReservationID], onDelete: Cascade, onUpdate: NoAction, map: "extra_charges_ibfk_1")
  extra_charge_types extra_charge_types? @relation(fields: [TypeID], references: [TypeID], onUpdate: NoAction, map: "extra_charges_ibfk_2")

  @@index([ReservationID], map: "ReservationID")
  @@index([TypeID], map: "TypeID")
}

model reservations {
  ReservationID   Int                       @id @default(autoincrement())
  CustomerID      Int
  CheckInDate     DateTime                  @db.Date
  CheckOutDate    DateTime                  @db.Date
  TotalAmount     Decimal                   @db.Decimal(10, 2)
  Room_Status     reservations_Room_Status  @default(Pending)
  PackageType     reservations_PackageType? @default(RoomOnly)
  Adults          Int?
  Children        Int?
  SpecialRequests String?                   @db.Text
  ArrivalTime     DateTime?                 @db.Time(0)
  DepartureTime   DateTime?                 @db.Time(0)
  CreatedAt       DateTime?                 @default(now()) @db.Timestamp(0)
  RoomID          Int
  extra_charges   extra_charges[]
  customers       customers                 @relation(fields: [CustomerID], references: [CustomerID], onDelete: NoAction, onUpdate: NoAction, map: "reservations_ibfk_1")
  rooms           rooms                     @relation(fields: [RoomID], references: [RoomID], onDelete: NoAction, onUpdate: NoAction, map: "reservations_ibfk_2")

  @@index([CustomerID], map: "CustomerID")
  @@index([RoomID], map: "RoomID")
}

model rooms {
  RoomID       Int            @id @default(autoincrement())
  RoomNumber   Int            @unique(map: "RoomNumber")
  Type         rooms_Type
  LocalPrice   Decimal        @db.Decimal(10, 2)
  Description  String?        @db.Text
  ForeignPrice Decimal        @db.Decimal(10, 2)
  MaxPeople    Int
  reservations reservations[]
}

enum customers_Title {
  Mr
  Mrs
  Ms
}

enum rooms_Type {
  Cabana
  Delux
  Suite
  Standard
}

enum reservations_Room_Status {
  Pending
  Confirmed
  Cancelled
  Completed
}

enum reservations_PackageType {
  RoomOnly
  HalfBoard
  FullBoard
}
